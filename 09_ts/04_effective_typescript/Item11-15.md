# :page_facing_up: Item11 ~ 15

<br>

## Item11. 잉여 속성 체크의 한계 인지하기

- 다음 두 예제의 차이를 알아보자.

```typescript
// example 1

interface Room {
  numDoors: number;
  ceilingHeightFt: number;
}

const r: Room = {
  numDoors: 1,
  ceilingHeightFt: 10,
  elephant: 'present',
}
```

```typescript
// example 2

interface Room {
  numDoors: number;
  ceilingHeightFt: number;
}

const obj = {
  numDoors: 1,
  ceilingHeightFt: 10,
  elephant: 'present',
}

const r: Room = obj;
```

- example 1에서 `r`은 타입 체커가 해당되는 속성이 없기 때문에 에러를 발생한다.
- example 2에서 `obj` 타입은 `{ numDoors: number; ceilingHeightFt: number; elephant: string }`으로 추론되어 `obj` 타입은 `Room` 타입의 부분 집합을 포함하므로, `Room`에 할당 가능하며 타입 체커도 통과한다.
- 첫 번째 예시의 경우, 구조적 타입 시스템에서 발생할 수 있는 중요한 오류 중 하나인 '잉여 속성 체크' 과정이 수행되어서 오류를 발생했다.
- 잉여 속성 체크가 할당 가능검사와는 별도의 과정이라는 것을 알아야 타입스크립트 타입 시스템에 대한 개념을 정확히 잡을 수 있다.

```typescript
interface Options {
  title: string;
  darkMode?: boolean;
}

function createWindow(options: Options) {
  if (options.darkMode) {
    setDarkMode();
  }
}

createWindow({
  title: 'Spider Solitaire',
  darkmode: true,
})
```

- 위 코드를 실행하면 런타임에 어떤 종류의 오류도 발생하지 않는다.
  - 그러나 타입스크립트가 "객체 리터럴은 알려진 속성만 지정할 수 있지만 'Options' 형식에 'darkmode'이(가) 없습니다. 'darkMode'을(를) 쓰려고 했습니까?"와 같은 오류 메시지처럼 의도한 대로 동작하지 않을 수 있다.
- `Options` 타입은 범위가 매우 넓어 순수한 구조적 타입 체커는 이러한 종류의 오류를 찾아내지 못한다.

```typescript
// 둘다 string 타입인 title 속성을 가지고 있어서 할당문은 정상(두 가지 모두 객체 리터럴이 아니므로 잉여 속성 체크가 되지 않음)

const o1: Options = document; // 정상
const o2: Options = new HTMLAnchorElement; // 정상
```

- 잉여 속성 체크를 이용하면 기본적으로 타입 시스템의 구조적 본질을 해치지 않으면서도 객체 리터럴에 알 수 없는 속성을 허용하지 않음으로써 오류를 막을 수 있다.

```typescript
// 아래 구문은 객체 리터럴이므로 잉여 속성 체크가 된다.

const o3: Options = { darkmode: true, title: 'Ski Free' }; // ~~~ 'Options' 형식에 'darkmode'이(가) 없습니다.
```

```typescript
// 타입 단언문을 사용하게 되면 잉여 속성 체크가 적용되지 않으므로 가급적이면 선언문을 이용해야 한다.

const o4 = { darkmode: true, title: 'Ski Free' } as Options; // 정상
```

- 만약 잉여 속성 체크를 원치 않는다면, 인덱스 시그니처를 사용해서 타입스크립트가 추가적인 속성을 예상하도록 할 수 있다.

```typescript
interface Options {
  [otherOptions: string]: unknown;
  darkMode?: boolean;
}

const o5: Options = { darkmode: true }; // 정상
```

<br>

## Item12. 함수 표현식에 타입 적용하기

(작성중...)
